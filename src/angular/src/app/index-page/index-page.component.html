<form class="form-inline waves-light" mdbWavesEffect>
  <div class="searchbar" *ngIf="pageLoaded">
    <input class="form-control" type="text" placeholder="Search stock" aria-label="Search"
           (input)="searchStock($event)" (click)="toggleDropDown()">
    <div class="dropsearch" *ngIf="showDropDown">
      <div class="stocksAfterSearch" *ngFor="let stock of searchResults" (click)="onSearchResultsClick(stock.ticker)">
        {{stock.name}}
      </div>
      <div class="stocksAfterSearch" *ngIf="searchResults.length==0 && searchInput.length!=0">
        No Stock Found
      </div>
    </div>

  </div>
</form>
<div class="tableDiv" *ngIf="pageLoaded">
  <table class="table table-striped">
    <thead>
    <tr class="table-header">
      <!--<th class="ranking" scope="col">#</th>-->
      <th class="name" scope="col" (click)="sortByName()">Name <i class="fa fa-sort"></i></th>
      <th class="ticker" scope="col">Ticker</th>
      <th class="lastprice" scope="col" (click)="sortByLastPrice($event)">Last Price <i class="fa fa-sort"></i></th>
      <th class="perChange" scope="col">%</th>
      <th class="high" scope="col">24 high</th>
      <th class="low" scope="col">24 low</th>
      <th class="graph" scope="col">Price Chart 1d</th>
      <th class="marketcap" scope="col">Market Cap</th>
      <th class="totalsupply" scope="col">Total Supply</th>
    </tr>
    </thead>
    <tbody>
    <tr class="pointerCursor" *ngFor="let stock of stocks | paginate: {itemsPerPage:50, currentPage: p}"
        (click)="onSearchResultsClick(stock.ticker)">
      <td class="name">{{stock.name}}</td>
      <td class="ticker font-weight-bold">({{stock.ticker}})</td>
      <td class="lastprice">${{stock.price.toLocaleString(undefined, {maximumFractionDigits: 2})}}</td>
      <td class="perChange font-weight-bold" [appPercentChange]="stock.p_change">
        {{(stock.p_change*100).toLocaleString()}}%
      </td>
      <td class="high">${{stock.max.toLocaleString(undefined, {maximumFractionDigits: 2})}}</td>
      <td class="low">${{stock.min.toLocaleString(undefined, {maximumFractionDigits: 2})}}</td>
      <td class="graph">TBD</td>
      <td class="marketcap">${{stock.total_market_cap.toLocaleString(undefined, {maximumFractionDigits: 2})}}</td>
      <td class="totalsupply">{{stock.total_stock_supply.toLocaleString()}}</td>
    </tr>
    </tbody>
  </table>
</div>

<div class="pagination justify-content-center" *ngIf="pageLoaded">
  <pagination-controls (pageChange)="p =$event" maxSize="10"></pagination-controls>
</div>
